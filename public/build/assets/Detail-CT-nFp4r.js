import{r as m,j as e,y as S}from"./app-RE_fQUSc.js";import{I as o}from"./InputTextLabel-DHBmEm5z.js";import{P as I}from"./ProductLayout-CNWj5mSS.js";import{F as P}from"./format-rupiah.esm-Dv-bfkK6.js";import{Q as k}from"./Toastify-CggrLxgU.js";import{S as T}from"./GuestLayout-WE9u8UZO.js";import"./input-Ci5nLZUe.js";import"./utils-DZ6KI8WZ.js";import"./label-S_mK3SRL.js";import"./index-DIL3v3WS.js";import"./index-Bb4qSo10.js";import"./circle-alert-DGL37OMs.js";import"./createLucideIcon-DF--Y4RT.js";import"./index-KFFEeN0q.js";const U=({produks:r,contact:x,kategoris:u,errors:h,flash:b})=>{const[g,i]=m.useState(!1),[s,d]=m.useState({name:"",phone:"",address:"",email:""}),[a,f]=m.useState(h||{}),l=n=>{d({...s,[n.target.name]:n.target.value})},j=()=>{i(!0)},y=()=>{i(!1)},v=n=>{const t=n.target.value;/^\d*$/.test(t)&&d({...s,phone:t})},w=async n=>{if(n.preventDefault(),p())try{S.post(route("transaksi.store"),{...s,price:r.price,nama_produk:r.name}),i(!1)}catch(t){t.response&&t.response.data.errors&&f(t.response.data.errors)}},p=()=>s.name&&s.phone&&s.address,N=n=>{const t=JSON.parse(localStorage.getItem("cart"))||[],c=t.findIndex(C=>C.id===n.id);c!==-1?t[c].quantity+=1:t.push({...n,quantity:1}),localStorage.setItem("cart",JSON.stringify(t)),window.dispatchEvent(new Event("cartUpdated"))};return e.jsxs(I,{contact:x,kategoris:u,head:"Produk",flash:b,children:[e.jsx(k,{}),e.jsxs("div",{className:"max-w-2xl mx-auto p-4 bg-white shadow-md rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:`/storage/${r.image}`,alt:r.name,className:"w-full h-64 object-contain rounded-lg"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:r.name}),e.jsx("p",{className:"text-gray-600 mt-2",children:r.deskripsion}),e.jsx("div",{className:"flex justify-between items-center mt-4",children:e.jsx("span",{className:"text-xl font-semibold text-green-600",children:e.jsx(P,{value:r.price})})})]}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[e.jsx("button",{onClick:()=>N(r),className:"bg-yellow-500 text-white py-2 px-4 rounded hover:bg-yellow-600 transition duration-200",children:e.jsx(T,{})}),e.jsx("button",{className:"bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition duration-200",onClick:j,children:"Beli Sekarang"})]})]}),g&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Informasi Pembeli"}),e.jsxs("form",{onSubmit:w,children:[e.jsx(o,{variant:"wajib",labelFor:"name",labelText:"Nama Pembeli",error:a&&a.name?a.name:"",inputId:"name",inputProps:{value:s.name,name:"name",type:"text",placeholder:"Masukkan Nama",onChange:l}}),e.jsx(o,{variant:"wajib",labelFor:"phone",labelText:"No. Telepon",error:a&&a.phone?a.phone:"",inputId:"phone",inputProps:{value:s.phone,name:"phone",type:"text",placeholder:"Masukkan No. Telepon",onChange:v}}),e.jsx(o,{variant:"wajib",labelFor:"address",labelText:"Alamat",error:a&&a.address?a.address:"",inputId:"address",inputProps:{value:s.address,name:"address",type:"text",placeholder:"Masukkan Alamat",onChange:l}}),e.jsx(o,{variant:"opsional",labelFor:"email",labelText:"Email (Opsional)",error:a&&a.email?a.email:"",inputId:"email",inputProps:{value:s.email,name:"email",type:"email",placeholder:"Masukkan Email",onChange:l}}),e.jsxs("div",{className:"flex justify-between mt-5",children:[e.jsx("button",{type:"button",onClick:y,className:"bg-gray-500 text-white py-2 px-4 rounded hover:bg-gray-600 transition duration-200",children:"Batal"}),e.jsx("button",{type:"submit",disabled:!p(),className:"bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition duration-200 disabled:bg-gray-400",children:"Konfirmasi Pembelian"})]})]})]})})]})};export{U as default};
